# КАЛЬКУЛЯТОР АРЕНДНОЙ ДОХОДНОСТИ
 
## 1. ОБЩИЕ СВЕДЕНИЯ

### 1.1. Наименование и обозначение программы
Полное наименование: Калькулятор арендной доходности.
Условное обозначение: КАД.

### 1.2. Назначение программы
Программа "Калькулятор арендной доходности" предназначена для анализа рентабельности объектов недвижимости в аренду. Программа позволяет рассчитывать ключевые показатели эффективности инвестиций: ROI (Return on Investment) и срок окупаемости , загружать данные с портала ЦИАН, сохранять информацию в базе данных PostgreSQL и экспортировать результаты в формате CSV.

### 1.3. Область применения
Программа может использоваться частными инвесторами, агентами недвижимости и другими лицами, заинтересованными в анализе потенциальной прибыльности объектов недвижимости. Предназначена как для личного использования, так и для профессионального анализа.

## 2. ФУНКЦИОНАЛЬНОЕ НАЗНАЧЕНИЕ

### 2.1. Перечень реализуемых функций
Программа обеспечивает выполнение следующих основных функций:
- Авторизация пользователя — вход или регистрация нового пользователя.
- Добавление новых объектов недвижимости с указанием района, цены, аренды, налогов и стоимости ремонта.
- Расчёт ROI и срока окупаемости на основе введённых данных.
- Загрузка данных с портала ЦИАН по URL объявления.
- Просмотр, редактирование и удаление записей из списка.
- Фильтрация объектов по району, цене, аренде, ROI и сроку окупаемости.
- Экспорт всех данных в CSV-файл .
- Хранение данных в базе данных PostgreSQL .
- Поддержка нескольких источников данных : PostgreSQL, CSV, ЦИАН API.

## 3. ОПИСАНИЕ ВХОДНЫХ И ВЫХОДНЫХ ДАННЫХ

### 3.1. Структура входных данных (пример)
Данные хранятся в базе данных PostgreSQL. Пример структуры таблицы properties:
```json
{
 CREATE TABLE properties (
    id SERIAL PRIMARY KEY,
    region VARCHAR(255),
    price NUMERIC,
    rent NUMERIC,
    taxes NUMERIC,
    repair_cost NUMERIC,
    roi NUMERIC,
    payback_period INT
}
```

### 3.2. Выходные данные
- Таблица объектов недвижимости в графическом интерфейсе.
- Результаты расчётов ROI и срока окупаемости в виде всплывающего окна.
- Экспортированные данные в файл output.csv.
- Сообщения об ошибках и уведомления пользователю.

## 4. УСЛОВИЯ ПРИМЕНЕНИЯ

### 4.1. Требования к программному обеспечению
-   Операционная система: Microsoft Windows 10/11.
-   Среда исполнения: Java Runtime Environment (JRE) версии 17 или выше.
-   PostgreSQL: установленная и запущенная СУБД

### 4.2. Требования к техническим средствам
-   Процессор: Intel Core i3 (или аналогичный).
-   Оперативная память (RAM): Не менее 4 ГБ.
-   Свободное место на диске: Не менее 500 МБ для установки и хранения данных.

### 4.3. Ограничения
- Для работы с базой данных необходимо правильное подключение к PostgreSQL (логин, пароль, порт).
- Парсинг с ЦИАН ограничен политикой сайта и может быть заблокирован.
- При использовании CSV DAO файл должен находиться в директории проекта.
- Поддержка только одного активного пользователя (без многопользовательского режима).

## 5. НАСТРОЙКА ПРОГРАММЫ

### 5.1. Файл конфигурации
Настройки программы находятся в классе PostgresDAO, где можно изменить параметры подключения к БД:
```java
this.connection = DriverManager.getConnection(
    "jdbc:postgresql://localhost:5432/rent_calculator",
    "postgres", "213456"
);
```

## 6. ПОРЯДОК РАБОТЫ

### 6.1. Установка и запуск

1.  **Сборка проекта (для разработчиков):**
    ```bash
    mvn clean package
    ```
2.  **Запуск приложения (для пользователей):**
    ```bash
    mvn javafx:run
    ```
    или запустите сгенерированный JAR-файл.

### 6.2. Основные действия пользователя
-   **Просмотр существующих записей:** На главном экране отображается таблица со всеми записями. Используйте фильтры и поиск для навигации.
-   **Управление записями:** Используйте кнопки "Добавить", "Редактировать", "Удалить" для управления записями.

## 7. СООБЩЕНИЯ ОПЕРАТОРУ (УСТРАНЕНИЕ ПРОБЛЕМ)

### 7.1. Нет подключения к базе данных

**Сообщение: Ошибка подключения к базе данных**
**Причины:**
- Неверные учетные данные (логин/пароль)
- Сервис PostgreSQL не запущен
- Название базы данных не совпадает
**Действия:**
- Проверьте настройки подключения в PostgresDAO.java
- Убедитесь, что сервер PostgreSQL запущен
- Убедитесь, что БД rent_calculator существует
### 7.2. Ошибка парсинга данных с ЦИАН
**Сообщение: JSON не найден на странице**
**Причины:**
- Изменение структуры HTML на сайте ЦИАН
- Использование невалидного URL
- Защита сайта против автоматизированного доступа
**Действия:**
- Проверьте, открывается ли ссылка в браузере
- Обновите CSS-селекторы в CianApiDAO.java
- Используйте тестовый JSON-файл (test-cian.json)

## 8. ПРОВЕРКА ПРОГРАММЫ

Проект включает набор модульных тестов, которые можно запустить командой:
```bash
mvn test
```
Успешное выполнение тестов свидетельствует о базовой работоспособности основных компонентов программы.

## 9. АВАРИЙНЫЕ СИТУАЦИИ И ДЕЙСТВИЯ ПОЛЬЗОВАТЕЛЯ

### 9.1. Непредвиденное завершение работы программы
**Ситуация:** Программа завершила работу без явных действий пользователя или вывела системную ошибку.
**Причина:** Непредвиденные ошибки в коде, нехватка системных ресурсов, конфликт с другим ПО.
**Действия:**
1.  Перезапустите программу.
2.  Проверьте достаточность оперативной памяти и свободного места на диске.
3.  При повторении проблемы обратитесь в службу технической поддержки, предоставив логи ошибок (если доступны).

### 9.2. Ошибка подключения к базе данных
**Ситуация:** Программа не может загрузить или сохранить данные записей.
**Причина:** 
- Сервер PostgreSQL не запущен
- Неверные параметры подключения
**Действия:**
- Запустите службу PostgreSQL
- Проверьте настройки подключения в PostgresDAO.java
- Убедитесь, что база данных rent_calculator создана

## 10. ТРЕБОВАНИЯ К КВАЛИФИКАЦИИ ПОЛЬЗОВАТЕЛЯ

Программа предназначена для использования конечными пользователями, обладающими базовыми навыками работы с компьютером и пониманием принципов арендного рынка недвижимости. Специальные знания в области программирования или администрирования не требуются.

## 11. ТЕХНИЧЕСКАЯ ПОДДЕРЖКА

По вопросам эксплуатации, обнаружения ошибок или для получения консультаций обращайтесь по адресу электронной почты: [ваш_email@example.com] или по телефону: [ваш_телефон].

## 12. ЛИЦЕНЗИОННЫЕ УСЛОВИЯ

Данная программа распространяется на условиях [тип_лицензии, например, MIT License / Проприетарная]. Использование программы регулируется положениями прилагаемого лицензионного соглашения.

## 13. ПЛАНЫ ПО РАЗВИТИЮ
**В дальнейшем планируется развитие функциональности, включая:**
- Интеграция с Яндекс.Недвижимостью и другими сайтами
- Автоматическое обновление данных
- Хранение истории изменений объектов
- Мобильное приложение
- Поддержка аналитики и графиков
- Шифрование данных
- Поддержка облачного хранения
